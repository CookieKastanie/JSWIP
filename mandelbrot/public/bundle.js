!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"create",(function(){return R})),r.d(n,"fromMat4",(function(){return L})),r.d(n,"clone",(function(){return S})),r.d(n,"copy",(function(){return b})),r.d(n,"fromValues",(function(){return g})),r.d(n,"set",(function(){return M})),r.d(n,"identity",(function(){return p})),r.d(n,"transpose",(function(){return N})),r.d(n,"invert",(function(){return O})),r.d(n,"adjoint",(function(){return I})),r.d(n,"determinant",(function(){return D})),r.d(n,"multiply",(function(){return P})),r.d(n,"translate",(function(){return F})),r.d(n,"rotate",(function(){return U})),r.d(n,"scale",(function(){return C})),r.d(n,"fromTranslation",(function(){return v})),r.d(n,"fromRotation",(function(){return w})),r.d(n,"fromScaling",(function(){return B})),r.d(n,"fromMat2d",(function(){return y})),r.d(n,"fromQuat",(function(){return G})),r.d(n,"normalFromMat4",(function(){return H})),r.d(n,"projection",(function(){return V})),r.d(n,"str",(function(){return Y})),r.d(n,"frob",(function(){return W})),r.d(n,"add",(function(){return X})),r.d(n,"subtract",(function(){return j})),r.d(n,"multiplyScalar",(function(){return $})),r.d(n,"multiplyScalarAndAdd",(function(){return q})),r.d(n,"exactEquals",(function(){return k})),r.d(n,"equals",(function(){return Q})),r.d(n,"mul",(function(){return z})),r.d(n,"sub",(function(){return K}));class i{constructor(t=300,e=300,r={webGLVersion:1,canvas:null}){if(i.ctx)throw"Display est un singleton -> qu'un seul canevas à la fois.";if(r.canvas)"string"==typeof r.canvas?this.canvas=document.querySelector(r.canvas):this.canvas=r.canvas;else{if(this.canvas=document.createElement("canvas"),this.canvas.id="webgl-canvas",this.conteneur=document.getElementById("webgl-screen"),!this.conteneur)throw'Impossible de créer le canevas, il faut ajouter une balise avec l\'id "webgl-screen"';this.conteneur.appendChild(this.canvas)}if(this.ctx=this.canvas.getContext(2==r.webGLVersion?"webgl2":"webgl"),this.ctx||(this.ctx=this.canvas.getContext("experimental-webgl")),!this.ctx)throw"Impossible de d'initialiser le contexte WebGL";this.loadExtensions(),this.use(),this.setSize(t,e),this.ctx.enable(this.ctx.DEPTH_TEST),this.setClearColor(Math.random(),Math.random(),Math.random(),1),this.ctx.enable(this.ctx.BLEND),this.ctx.enable(this.ctx.SAMPLE_ALPHA_TO_COVERAGE),this.defaultBlendFunc(),this.ctx.enable(this.ctx.CULL_FACE),this.ctx.frontFace(this.ctx.CCW),this.ctx.cullFace(this.ctx.BACK),this.clear()}loadExtensions(){this.exts={WEBGL_depth_texture:this.ctx.getExtension("WEBGL_depth_texture")}}getDiv(){return this.conteneur}setSize(t,e){this.canvas.width=t,this.canvas.height=e,this.ctx.viewport(0,0,t,e)}getWidth(){return this.canvas.width}getHeight(){return this.canvas.height}setClearColor(t,e,r,n){this.ctx.clearColor(t,e,r,n)}clear(){this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT)}clearColor(){this.ctx.clear(this.ctx.COLOR_BUFFER_BIT)}clearDepth(){this.ctx.clear(this.ctx.DEPTH_BUFFER_BIT)}getCtx(){return this.ctx}use(){i.ctx=this.getCtx()}useDefaultFrameBuffer(){this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,null),this.ctx.viewport(0,0,this.getWidth(),this.getHeight())}enable(t){this.ctx.enable(this.ctx[t])}disable(t){this.ctx.disable(this.ctx[t])}blendFunc(t,e){this.ctx.blendFunc(this.ctx[t],this.ctx[e])}depthFunc(t){this.ctx.depthFunc(this.ctx[t])}defaultBlendFunc(){this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA)}blendFuncSeparate(t,e,r,n){this.ctx.blendFuncSeparate(this.ctx[t],this.ctx[e],this.ctx[r],this.ctx[n])}getCanvas(){return this.canvas}}i.ctx=null,i.BLEND="BLEND",i.CULL_FACE="CULL_FACE",i.DEPTH_TEST="DEPTH_TEST",i.DITHER="DITHER",i.POLYGON_OFFSET_FILL="POLYGON_OFFSET_FILL",i.SAMPLE_ALPHA_TO_COVERAGE="SAMPLE_ALPHA_TO_COVERAGE",i.SAMPLE_COVERAGE="SAMPLE_COVERAGE",i.SCISSOR_TEST="SCISSOR_TEST",i.STENCIL_TEST="STENCIL_TEST",i.LEQUAL="LEQUAL",i.LESS="LESS",i.ZERO="ZERO",i.ONE="ONE",i.SRC_COLOR="SRC_COLOR",i.ONE_MINUS_SRC_COLOR="ONE_MINUS_SRC_COLOR",i.DST_COLOR="DST_COLOR",i.ONE_MINUS_DST_COLOR="ONE_MINUS_DST_COLOR",i.SRC_ALPHA="SRC_ALPHA",i.ONE_MINUS_SRC_ALPHA="ONE_MINUS_SRC_ALPHA",i.DST_ALPHA="DST_ALPHA",i.ONE_MINUS_DST_ALPHA="ONE_MINUS_DST_ALPHA",i.CONSTANT_COLOR="CONSTANT_COLOR",i.ONE_MINUS_CONSTANT_COLOR="ONE_MINUS_CONSTANT_COLOR",i.CONSTANT_ALPHA="CONSTANT_ALPHA",i.ONE_MINUS_CONSTANT_ALPHA="ONE_MINUS_CONSTANT_ALPHA",i.SRC_ALPHA_SATURATE="SRC_ALPHA_SATURATE";class s{constructor(t){this.pointer=i.ctx.createBuffer(),this.dataLength=-1,this.setUsage(t)}setUsage(t=s.STATIC_DRAW){return this.usage=i.ctx[t],this}delete(){i.ctx.deleteBuffer(this.pointer)}}class a extends s{constructor(t,e,r,n){super(n),this.attribLocation=r,this.nbOfElement=e,this.setData=a.prototype.setNewData,t&&(void 0!==t.BYTES_PER_ELEMENT?this.setData(t):this.setData(new Float32Array(t)))}setData(t,e=0){}setNewData(t){i.ctx.bindBuffer(i.ctx.ARRAY_BUFFER,this.pointer),i.ctx.bufferData(i.ctx.ARRAY_BUFFER,t,this.usage),this.dataLength=t.length,this.setData=a.prototype.setSubData}setSubData(t,e=0){i.ctx.bindBuffer(i.ctx.ARRAY_BUFFER,this.pointer),i.ctx.bufferSubData(i.ctx.ARRAY_BUFFER,e*Float32Array.BYTES_PER_ELEMENT,t)}getDataLength(){return this.dataLength/this.nbOfElement}use(){i.ctx.bindBuffer(i.ctx.ARRAY_BUFFER,this.pointer),i.ctx.vertexAttribPointer(this.attribLocation,this.nbOfElement,i.ctx.FLOAT,i.ctx.FALSE,0,0)}}class o extends s{constructor(t,e){super(e),this.vertexAttribs=new Array,this.nbOfElement=0,this.setData=o.prototype.setNewData,this.setData(t)}addVertexAttribute(t,e,r=0,n=0,s=o.FLOAT){return this.nbOfElement+=t,this.vertexAttribs.push({nbOfElement:t,attribLocation:e,offset:r,step:n,type:i.ctx[s]}),this}setData(t,e=0){}setNewData(t){i.ctx.bindBuffer(i.ctx.ARRAY_BUFFER,this.pointer),i.ctx.bufferData(i.ctx.ARRAY_BUFFER,t,this.usage),this.dataLength=t.length,this.setData=o.prototype.setSubData}setSubData(t,e=0){i.ctx.bindBuffer(i.ctx.ARRAY_BUFFER,this.pointer),i.ctx.bufferSubData(i.ctx.ARRAY_BUFFER,e*Float32Array.BYTES_PER_ELEMENT,t)}getDataLength(){return this.dataLength/this.nbOfElement}use(){i.ctx.bindBuffer(i.ctx.ARRAY_BUFFER,this.pointer);for(const t of this.vertexAttribs)i.ctx.vertexAttribPointer(t.attribLocation,t.nbOfElement,t.type,i.ctx.FALSE,t.step,t.offset)}}class c extends s{constructor(t,e){super(e),this.setData=c.prototype.setNewData,t&&(void 0!==t.BYTES_PER_ELEMENT?this.setData(t):this.setData(new Uint16Array(t)))}setData(){}setNewData(t){i.ctx.bindBuffer(i.ctx.ELEMENT_ARRAY_BUFFER,this.pointer),i.ctx.bufferData(i.ctx.ELEMENT_ARRAY_BUFFER,t,this.usage),this.dataLength=t.length,this.setData=c.prototype.setSubData}setSubData(t,e=0){i.ctx.bindBuffer(i.ctx.ELEMENT_ARRAY_BUFFER,this.pointer),i.ctx.bufferSubData(i.ctx.ELEMENT_ARRAY_BUFFER,e,t)}getDataLength(){return this.dataLength}use(){i.ctx.bindBuffer(i.ctx.ELEMENT_ARRAY_BUFFER,this.pointer)}}c.STATIC_DRAW=a.STATIC_DRAW=s.STATIC_DRAW="STATIC_DRAW",c.DYNAMIC_DRAW=a.DYNAMIC_DRAW=s.DYNAMIC_DRAW="DYNAMIC_DRAW",c.STREAM_DRAW=a.STREAM_DRAW=s.STREAM_DRAW="STREAM_DRAW",o.BYTE=s.BYTE="BYTE",o.SHORT=s.SHORT="SHORT",o.UNSIGNED_BYTE=s.UNSIGNED_BYTE="UNSIGNED_BYTE",o.UNSIGNED_SHORT=s.UNSIGNED_SHORT="UNSIGNED_SHORT",o.FLOAT=s.FLOAT="FLOAT";class h{constructor(t,e){this.id=u.idMax++,this.width=t,this.height=e,this.texture=i.ctx.createTexture(),this.setUnit(0),this.use(),this.setParameters()}getWidth(){return this.width}getHeight(){return this.height}setUnit(t){return this.unit=t,this}getUnit(){return this.unit}use(){u.currentIds[this.unit]!=this.id&&(u.currentIds[this.unit]=this.id,i.ctx.activeTexture(i.ctx.TEXTURE0+this.unit),i.ctx.bindTexture(i.ctx.TEXTURE_2D,this.texture))}getLocation(){return this.texture}isPowerOf2(t){return 0==(t&t-1)}setParameters(t={magFilter:u.LINEAR,minFilter:u.LINEAR,wrapS:u.REPEAT,wrapT:u.REPEAT}){return t={magFilter:t.magFilter||u.LINEAR,minFilter:t.minFilter||u.LINEAR,wrapS:t.wrapS||u.REPEAT,wrapT:t.wrapT||u.REPEAT},i.ctx.texParameteri(i.ctx.TEXTURE_2D,i.ctx.TEXTURE_WRAP_S,i.ctx.CLAMP_TO_EDGE),i.ctx.texParameteri(i.ctx.TEXTURE_2D,i.ctx.TEXTURE_WRAP_T,i.ctx.CLAMP_TO_EDGE),i.ctx.texParameteri(i.ctx.TEXTURE_2D,i.ctx.TEXTURE_MIN_FILTER,i.ctx[t.minFilter]),i.ctx.texParameteri(i.ctx.TEXTURE_2D,i.ctx.TEXTURE_MAG_FILTER,i.ctx[t.magFilter]),this}delete(){i.ctx.deleteTexture(this.texture)}}class u extends h{constructor(t,e=t.width,r=t.height){super(e,r),null!=t?this.setTextureData(t):i.ctx.texImage2D(i.ctx.TEXTURE_2D,0,i.ctx.RGBA,this.width,this.height,0,i.ctx.RGBA,i.ctx.UNSIGNED_BYTE,null)}setTextureData(t){this.use(),i.ctx.texImage2D(i.ctx.TEXTURE_2D,0,i.ctx.RGBA,i.ctx.RGBA,i.ctx.UNSIGNED_BYTE,t)}}u.idMax=0,u.currentIds=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],u.LINEAR="LINEAR",u.NEAREST="NEAREST",u.LINEAR_MIPMAP_LINEAR="LINEAR_MIPMAP_LINEAR",u.LINEAR_MIPMAP_NEAREST="LINEAR_MIPMAP_NEAREST",u.NEAREST_MIPMAP_NEAREST="NEAREST_MIPMAP_NEAREST",u.NEAREST_MIPMAP_LINEAR="NEAREST_MIPMAP_LINEAR",u.REPEAT="REPEAT",u.CLAMP_TO_EDGE="CLAMP_TO_EDGE",u.MIRRORED_REPEAT="MIRRORED_REPEAT";class l{constructor(t,e,r="Shader"){if(this.name=r,this.program=null,this.attributList=new Object,this.attributNumber=0,this.uniformList=new Object,this.vertexShader=this.createShader(i.ctx.VERTEX_SHADER,t),!this.vertexShader)return;if(this.fragmantShader=this.createShader(i.ctx.FRAGMENT_SHADER,e),!this.fragmantShader)return;this.createProgramme();let n=null,s=0;const a=i.ctx.getProgramParameter(this.program,i.ctx.ACTIVE_UNIFORMS);for(;s<a;)n=i.ctx.getActiveUniform(this.program,s++),n&&this.initUniformLocation(n.name);this.attributNumber=i.ctx.getProgramParameter(this.program,i.ctx.ACTIVE_ATTRIBUTES)-1,l.attributeMax<this.attributNumber&&(l.attributeMax=this.attributNumber)}delShad(t){i.ctx.detacheShader(this.program,t),i.ctx.deleteShader(t)}createShader(t,e){const r=i.ctx.createShader(t);return i.ctx.shaderSource(r,e),i.ctx.compileShader(r),i.ctx.getShaderParameter(r,i.ctx.COMPILE_STATUS)?r:(console.error(this.name+" -> erreur de compilation "+(t==i.ctx.VERTEX_SHADER?"vertex":"fragment")+" shader!",i.ctx.getShaderInfoLog(r)),null)}createProgramme(){let t=i.ctx.createProgram();i.ctx.attachShader(t,this.vertexShader),i.ctx.attachShader(t,this.fragmantShader),i.ctx.linkProgram(t),i.ctx.getProgramParameter(t,i.ctx.LINK_STATUS)?(i.ctx.validateProgram(t),i.ctx.getProgramParameter(t,i.ctx.VALIDATE_STATUS)?this.program=t:console.error(this.name+" -> erreur de validation du programme",i.ctx.getProgramInfoLog(t))):console.error(this.name+" -> Impossible de lier le programme",i.ctx.getProgramInfoLog(t))}initUniformLocation(t){t=t.replace(/\[0\]/,"");const e=i.ctx.getUniformLocation(this.program,t);e?this.uniformList[t]=e:console.error("Uniform '"+t+"' n'existe pas dans "+this.name)}delete(){this.program&&(this.delShad(this.vertexShader),this.delShad(this.fragmantShader),i.ctx.deleteProgram(this.program),this.program=null)}use(){if(!this.program)return console.error(this.name+" -> Programme invalide");i.ctx.useProgram(this.program);for(let t=0;t<=l.attributeMax;++t)t<=this.attributNumber?i.ctx.enableVertexAttribArray(t):i.ctx.disableVertexAttribArray(t)}getAttribLocation(t){if(void 0===this.attributList[t]){const e=i.ctx.getAttribLocation(this.program,t);if(e<0)return void console.error("L'attribut '"+t+"' n'existe pas, ou il n'est pas utilisé dans "+this.name);this.attributList[t]=e}return this.attributList[t]}getUniformLocation(t){return this.uniformList[t]}sendFloat(t,e){i.ctx.uniform1f(this.getUniformLocation(t),e)}sendInt(t,e){i.ctx.uniform1i(this.getUniformLocation(t),e)}sendIntVec(t,e){i.ctx.uniform1iv(this.getUniformLocation(t),e)}sendVec1(t,e){i.ctx.uniform1fv(this.getUniformLocation(t),e)}sendVec2(t,e){i.ctx.uniform2fv(this.getUniformLocation(t),e)}sendVec3(t,e){i.ctx.uniform3fv(this.getUniformLocation(t),e)}sendVec4(t,e){i.ctx.uniform4fv(this.getUniformLocation(t),e)}sendMat2(t,e){i.ctx.uniformMatrix2fv(this.getUniformLocation(t),i.ctx.FALSE,e)}sendMat3(t,e){i.ctx.uniformMatrix3fv(this.getUniformLocation(t),i.ctx.FALSE,e)}sendMat4(t,e){i.ctx.uniformMatrix4fv(this.getUniformLocation(t),i.ctx.FALSE,e)}}l.attributeMax=-1;class d{constructor(t){this.id=d.idMax++,this.draw=d.prototype.drawVAO,this.setMode(t),this.vbos=new Array,this.vboNames=new Object}setMode(t=d.TRIANGLES){return this.mode=i.ctx[t],this}addVBO(t,e=this.vbos.length){const r=this.vbos.length;return this.vboNames[e]=r,this.vbos.push(t),this.refreshDataLength(),this}getVBO(t){return this.vbos[this.vboNames[t]]}use(){this.id!=d.currentId&&(this.useVBOs(),d.currentId=this.id)}refreshDataLength(){for(const t of this.vbos)if(this.dataLength=t.getDataLength(),this.dataLength<0)break}useVBOs(){for(const t of this.vbos)t.use()}drawCheck(){this.refreshDataLength(),this.dataLength>=0&&(this.draw=d.prototype.drawVAO,this.draw())}drawVAO(){this.use(),i.ctx.drawArrays(this.mode,0,this.dataLength)}delete(){for(const t of this.vbos)t.delete()}}d.idMax=0,d.currentId=-1;class E extends d{constructor(t,e){super(t),this.draw=E.prototype.drawCheck,e&&this.setIBO(e)}setIBO(t){return this.ibo=t,this.refreshDataLength(),this}getIBO(){return this.ibo}refreshDataLength(){this.ibo&&(this.nbIndex=this.ibo.getDataLength())}useVBOs(){this.ibo.use(),super.useVBOs()}draw(){}drawCheck(){this.refreshDataLength(),this.nbIndex>=0&&(this.draw=E.prototype.drawVAO,this.draw())}drawVAO(){this.use(),i.ctx.drawElements(this.mode,this.nbIndex,i.ctx.UNSIGNED_SHORT,0)}delete(){this.ibo&&this.ibo.delete(),super.delete()}}E.TRIANGLES=d.TRIANGLES="TRIANGLES",E.TRIANGLE_STRIP=d.TRIANGLE_STRIP="TRIANGLE_STRIP",E.TRIANGLE_FAN=d.TRIANGLE_FAN="TRIANGLE_FAN",E.POINTS=d.POINTS="POINTS",E.LINES=d.LINES="LINES",E.LINE_STRIP=d.LINE_STRIP="LINE_STRIP",E.LINE_LOOP=d.LINE_LOOP="LINE_LOOP";const f=async(t,e)=>new Promise((r,n)=>{const i=document.createElement(t.mediaType);t.mediaType==A.IMAGE?i.onload=()=>{r(i)}:i.onloadedmetadata=()=>{r(i)},i.onerror=()=>{n()},i.src=`${t.dir}/${e}${t.extension}`}),x=async(t,e)=>fetch(`${t.dir}/${e}${t.extension}`).then(e=>e.ok?e[t.mediaType]():Promise.reject());class A{constructor(t,e,r={extension:null,mediaType:null,treatment:null,default:null}){this.setDirectory(t),this.setFileList(e),this.setOptions(r)}setDirectory(t="./"){return this.dir=t,this}setFileList(t=[]){return this.names=t.map(t=>t.trim()),this}setOptions(t={extension:null,mediaType:null,treatment:null,default:null}){return this.extension=t.extension?"."+t.extension:"",this.mediaType=t.mediaType||A.TEXT,this.treatment=t.treatment||null,this.default=t.default||void 0,this}initForLoad(){"image"===this.mediaType&&(this.mediaType=A.IMAGE),this.mediaType===A.IMAGE||this.mediaType===A.VIDEO||this.mediaType===A.AUDIO?this.requeteMode="media":this.requeteMode="file",this.files=new Map,"function"!=typeof this.treatment&&(this.treatment=null)}async load(t,e=""){return this.initForLoad(),"function"!=typeof t&&(t=()=>{}),new Promise((r,n)=>{if(0==this.names.length)return void r();const i="media"===this.requeteMode?f:x;this.count=0,t(0,e);for(const e of this.names)i(this,e).then(async n=>{this.treatment?this.files.set(e,await this.treatment(n,e)):this.files.set(e,n),++this.count,t(Math.floor(this.count/this.names.length*100),e),this.count==this.names.length&&r()}).catch(t=>{console.warn(`Impossible de charger le fichier '${this.dir}/${e}${this.extension}'\n${t}`),n()})})}get(t){const e=this.files.get(t);return e||this.files.get(this.default)}getAll(){return this.files}}A.IMAGE="img",A.VIDEO="video",A.AUDIO="audio",A.ARRAY_BUFFER="arrayBuffer",A.BLOB="blob",A.FORM_DATA="formData",A.JSON="json",A.TEXT="text";class m{constructor(t={version:"",precision:"precision mediump float;"}){this.params=t}getPrograms(t){const e=[`${this.params.version}\n${this.params.precision}\n`,`${this.params.version}\n${this.params.precision}\n`],r=t.split("\n");let n=-1;for(const t of r)0!=n&&"#VERT_START"==t.trim().toUpperCase()?n=0:1!=n&&"#FRAG_START"==t.trim().toUpperCase()?n=1:e[n]+=t+"\n";return{vertex:e[0],fragment:e[1]}}}const T=1e-6;let _="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function R(){let t=new _(9);return _!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function L(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function S(t){let e=new _(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function b(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function g(t,e,r,n,i,s,a,o,c){let h=new _(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=s,h[6]=a,h[7]=o,h[8]=c,h}function M(t,e,r,n,i,s,a,o,c,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=c,t[8]=h,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function N(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function O(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],c=e[6],h=e[7],u=e[8],l=u*a-o*h,d=-u*s+o*c,E=h*s-a*c,f=r*l+n*d+i*E;return f?(f=1/f,t[0]=l*f,t[1]=(-u*n+i*h)*f,t[2]=(o*n-i*a)*f,t[3]=d*f,t[4]=(u*r-i*c)*f,t[5]=(-o*r+i*s)*f,t[6]=E*f,t[7]=(-h*r+n*c)*f,t[8]=(a*r-n*s)*f,t):null}function I(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],c=e[6],h=e[7],u=e[8];return t[0]=a*u-o*h,t[1]=i*h-n*u,t[2]=n*o-i*a,t[3]=o*c-s*u,t[4]=r*u-i*c,t[5]=i*s-r*o,t[6]=s*h-a*c,t[7]=n*c-r*h,t[8]=r*a-n*s,t}function D(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],c=t[7],h=t[8];return e*(h*s-a*c)+r*(-h*i+a*o)+n*(c*i-s*o)}function P(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],c=e[5],h=e[6],u=e[7],l=e[8],d=r[0],E=r[1],f=r[2],x=r[3],A=r[4],m=r[5],T=r[6],_=r[7],R=r[8];return t[0]=d*n+E*a+f*h,t[1]=d*i+E*o+f*u,t[2]=d*s+E*c+f*l,t[3]=x*n+A*a+m*h,t[4]=x*i+A*o+m*u,t[5]=x*s+A*c+m*l,t[6]=T*n+_*a+R*h,t[7]=T*i+_*o+R*u,t[8]=T*s+_*c+R*l,t}function F(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],c=e[5],h=e[6],u=e[7],l=e[8],d=r[0],E=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=c,t[6]=d*n+E*a+h,t[7]=d*i+E*o+u,t[8]=d*s+E*c+l,t}function U(t,e,r){let n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],c=e[5],h=e[6],u=e[7],l=e[8],d=Math.sin(r),E=Math.cos(r);return t[0]=E*n+d*a,t[1]=E*i+d*o,t[2]=E*s+d*c,t[3]=E*a-d*n,t[4]=E*o-d*i,t[5]=E*c-d*s,t[6]=h,t[7]=u,t[8]=l,t}function C(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function v(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function w(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function B(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function G(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,c=i+i,h=r*a,u=n*a,l=n*o,d=i*a,E=i*o,f=i*c,x=s*a,A=s*o,m=s*c;return t[0]=1-l-f,t[3]=u-m,t[6]=d+A,t[1]=u+m,t[4]=1-h-f,t[7]=E-x,t[2]=d-A,t[5]=E+x,t[8]=1-h-l,t}function H(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],c=e[6],h=e[7],u=e[8],l=e[9],d=e[10],E=e[11],f=e[12],x=e[13],A=e[14],m=e[15],T=r*o-n*a,_=r*c-i*a,R=r*h-s*a,L=n*c-i*o,S=n*h-s*o,b=i*h-s*c,g=u*x-l*f,M=u*A-d*f,p=u*m-E*f,N=l*A-d*x,O=l*m-E*x,I=d*m-E*A,D=T*I-_*O+R*N+L*p-S*M+b*g;return D?(D=1/D,t[0]=(o*I-c*O+h*N)*D,t[1]=(c*p-a*I-h*M)*D,t[2]=(a*O-o*p+h*g)*D,t[3]=(i*O-n*I-s*N)*D,t[4]=(r*I-i*p+s*M)*D,t[5]=(n*p-r*O-s*g)*D,t[6]=(x*b-A*S+m*L)*D,t[7]=(A*R-f*b-m*_)*D,t[8]=(f*S-x*R+m*T)*D,t):null}function V(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Y(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function W(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function X(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function $(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function q(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Q(t,e){let r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],c=t[6],h=t[7],u=t[8],l=e[0],d=e[1],E=e[2],f=e[3],x=e[4],A=e[5],m=e[6],_=e[7],R=e[8];return Math.abs(r-l)<=T*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=T*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-E)<=T*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-f)<=T*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-x)<=T*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-A)<=T*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(c-m)<=T*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(h-_)<=T*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(u-R)<=T*Math.max(1,Math.abs(u),Math.abs(R))}const z=P,K=j;function Z(){let t=new _(3);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function J(t,e,r){let n=new _(3);return n[0]=t,n[1]=e,n[2]=r,n}function tt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function et(t,e,r){let n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],c=r[2];return t[0]=i*c-s*o,t[1]=s*a-n*c,t[2]=n*o-i*a,t}const rt=function(t){let e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)};!function(){let t=Z()}();!function(){let t=function(){let t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function nt(){let t=new _(4);return _!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function it(t,e,r,n){let i,s,a,o,c,h=e[0],u=e[1],l=e[2],d=e[3],E=r[0],f=r[1],x=r[2],A=r[3];return s=h*E+u*f+l*x+d*A,s<0&&(s=-s,E=-E,f=-f,x=-x,A=-A),1-s>T?(i=Math.acos(s),a=Math.sin(i),o=Math.sin((1-n)*i)/a,c=Math.sin(n*i)/a):(o=1-n,c=n),t[0]=o*h+c*E,t[1]=o*u+c*f,t[2]=o*l+c*x,t[3]=o*d+c*A,t}const st=function(t,e){let r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t};(function(){let t=Z(),e=J(1,0,0),r=J(0,1,0)})(),function(){let t=nt(),e=nt()}(),function(){let t=R()}();!function(){let t=function(){let t=new _(2);return _!=Float32Array&&(t[0]=0,t[1]=0),t}()}();const at=new i(500,500),ot={},ct={},ht={},ut=n.create();window.render=(t=1,e=0,r=0)=>{n.identity(ut),n.translate(ut,ut,[-e,-r]),n.scale(ut,ut,[t,t]),at.clear(),ct.main.use(),ct.main.sendMat3("transform",ut),ht.screen.draw()},(async()=>{const t=new m;ot.shaders=new A("./shaders",["main"],{extension:"glsl",treatment:e=>t.getPrograms(e)}),await ot.shaders.load(),ct.main=new l(ot.shaders.get("main").vertex,ot.shaders.get("main").fragment,"main"),ht.screen=(new E).addVBO(new a([-1,1,1,1,1,-1,-1,-1],2,ct.main.getAttribLocation("position"))).addVBO(new a([-1.5,1,.5,1,.5,-1,-1.5,-1],2,ct.main.getAttribLocation("texpos"))).setIBO(new c([0,1,2,0,2,3])),at.disable(i.CULL_FACE),render()})()}]);