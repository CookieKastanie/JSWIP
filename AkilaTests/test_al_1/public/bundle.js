!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n{static identity(t=new Float32Array(16)){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}static lookAt(t,e,i,r){let s,a,o,h,c,l,u,d,m,p,f=e[0],y=e[1],M=e[2],b=r[0],x=r[1],g=r[2],T=i[0],w=i[1],O=i[2];return Math.abs(f-T)<n.EPSILON&&Math.abs(y-w)<n.EPSILON&&Math.abs(M-O)<n.EPSILON?n.identity(t):(u=f-T,d=y-w,m=M-O,s=x*(m*=p=1/Math.sqrt(u*u+d*d+m*m))-g*(d*=p),a=g*(u*=p)-b*m,o=b*d-x*u,(p=Math.sqrt(s*s+a*a+o*o))?(s*=p=1/p,a*=p,o*=p):(s=0,a=0,o=0),h=d*o-m*a,c=m*s-u*o,l=u*a-d*s,(p=Math.sqrt(h*h+c*c+l*l))?(h*=p=1/p,c*=p,l*=p):(h=0,c=0,l=0),t[0]=s,t[1]=h,t[2]=u,t[3]=0,t[4]=a,t[5]=c,t[6]=d,t[7]=0,t[8]=o,t[9]=l,t[10]=m,t[11]=0,t[12]=-(s*f+a*y+o*M),t[13]=-(h*f+c*y+l*M),t[14]=-(u*f+d*y+m*M),t[15]=1,t)}static perspective(t,e,i,n,r){let s=1/Math.tan(e/2),a=1/(n-r);return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*a,t[15]=1,t}static ortho(t,e,i,n,r,s,a){let o=1/(e-i),h=1/(n-r),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*h,t[14]=(a+s)*c,t[15]=1,t}static mult(t,e,i){let n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],h=e[5],c=e[6],l=e[7],u=e[8],d=e[9],m=e[10],p=e[11],f=e[12],y=e[13],M=e[14],b=e[15],x=i[0],g=i[1],T=i[2],w=i[3];return t[0]=x*n+g*o+T*u+w*f,t[1]=x*r+g*h+T*d+w*y,t[2]=x*s+g*c+T*m+w*M,t[3]=x*a+g*l+T*p+w*b,x=i[4],g=i[5],T=i[6],w=i[7],t[4]=x*n+g*o+T*u+w*f,t[5]=x*r+g*h+T*d+w*y,t[6]=x*s+g*c+T*m+w*M,t[7]=x*a+g*l+T*p+w*b,x=i[8],g=i[9],T=i[10],w=i[11],t[8]=x*n+g*o+T*u+w*f,t[9]=x*r+g*h+T*d+w*y,t[10]=x*s+g*c+T*m+w*M,t[11]=x*a+g*l+T*p+w*b,x=i[12],g=i[13],T=i[14],w=i[15],t[12]=x*n+g*o+T*u+w*f,t[13]=x*r+g*h+T*d+w*y,t[14]=x*s+g*c+T*m+w*M,t[15]=x*a+g*l+T*p+w*b,t}static fromRotation(t,e,i){let r,s,a,o=i[0],h=i[1],c=i[2],l=Math.sqrt(o*o+h*h+c*c);return Math.abs(l)<n.EPSILON?null:(o*=l=1/l,h*=l,c*=l,r=Math.sin(e),a=1-(s=Math.cos(e)),t[0]=o*o*a+s,t[1]=h*o*a+c*r,t[2]=c*o*a-h*r,t[3]=0,t[4]=o*h*a-c*r,t[5]=h*h*a+s,t[6]=c*h*a+o*r,t[7]=0,t[8]=o*c*a+h*r,t[9]=h*c*a-o*r,t[10]=c*c*a+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}}n.EPSILON=1e-6;class r{constructor(t,e){this.camMatrix=n.identity(new Float32Array(16)),this.projMatrix=n.perspective(n.identity(new Float32Array(16)),1.0472,t/e,.001,1),this.finalMat=n.identity(new Float32Array(16))}getMatrix(){return n.mult(this.finalMat,this.projMatrix,this.camMatrix)}}r.DEMIPI=Math.PI/2;const s=new(window.AudioContext||window.webkitAudioContext);let a,o,h=new class{constructor(t,e,i){this.setDirectory(t),this.setFileListe(e),this.setOptions(i)}setDirectory(t="./"){return this.rep=t,this}setFileListe(t=[]){return this.noms=t.map(t=>t.trim()),this}setOptions(t={}){return this.extension=t.extension?`.${t.extension}`:"",this.mediaType=t.mediaType||"text",this.treatment=t.treatment||null,this.default=t.default||void 0,this}initForLoad(){"image"===this.mediaType&&(this.mediaType="img"),"img"===this.mediaType||"video"===this.mediaType||"audio"===this.mediaType?this.requeteMode="media":this.requeteMode="file","arrayBuffer"!==this.mediaType&&"blob"!==this.mediaType&&"formData"!==this.mediaType&&"json"!==this.mediaType&&"text"===this.mediaType&&(this.mediaType="text"),this.fichiers=new Object}async loadMedia(t){return new Promise((e,i)=>{const n=document.createElement(this.mediaType);"img"==this.mediaType?n.onload=(()=>{e(n)}):n.onloadedmetadata=(()=>{e(n)}),n.onerror=(()=>{i()}),n.src=`${this.rep}/${t}${this.extension}`})}async loadFile(t){return fetch(`${this.rep}/${t}${this.extension}`).then(t=>t.ok?t[this.mediaType]():Promise.reject())}async load(t){return this.initForLoad(),"function"!=typeof t&&(t=(t=>{})),new Promise(async(e,i)=>{if(0==this.noms.length)t(100),e();else{let i,n=this.noms.length;t(0),i="media"===this.requeteMode?this.loadMedia.bind(this):this.loadFile.bind(this);for(const e of this.noms)await i(e).then(async i=>{"function"==typeof this.treatment?this.fichiers[e]=await this.treatment(i):this.fichiers[e]=i,--n,t(Math.floor((this.noms.length-n)/this.noms.length*100))}).catch(t=>{console.warn(`Impossible de charger le fichier '${this.rep}/${e}${this.extension}'\n${t}`)});e()}})}get(t){const e=this.fichiers[t];return e||this.fichiers[this.default]}getAll(){return this.fichiers}}("./sounds",["sample1"],{extension:"mp3",mediaType:"audio",treatment:t=>{const e=s.createMediaElementSource(t);return t.source=e,t}});h.load().then(()=>{console.log("ready"),btn.onclick=c});const c=async()=>{btn.onclick=(()=>{}),s.resume(),a=h.get("sample1"),(o=s.createGain()).gain.value=.1,a.source.connect(o),o.connect(s.destination),a.play()}}]);